#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Executando validaÃ§Ã£o prÃ©-commit..."
echo ""

# Executar auditoria rÃ¡pida do corpus
echo "ğŸ“Š Auditando integridade do corpus..."
npm run test:corpus:audit

# Se passou, continuar
if [ $? -eq 0 ]; then
  echo ""
  echo "âœ… Auditoria passou! Commit permitido."
  echo ""
else
  echo ""
  echo "âŒ Auditoria falhou! Commit bloqueado."
  echo ""
  echo "ğŸ”§ Para corrigir:"
  echo "   1. Revise os erros acima"
  echo "   2. Corrija os dados do corpus"
  echo "   3. Execute: npm run test:corpus:audit"
  echo "   4. Tente commitar novamente"
  echo ""
  echo "âš ï¸  Para bypass (emergÃªncia): git commit --no-verify"
  echo ""
  exit 1
fi
