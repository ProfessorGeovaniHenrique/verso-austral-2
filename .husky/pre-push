#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Executando validaÃ§Ã£o prÃ©-push..."
echo ""

# Executar suite completa de testes
echo "ğŸ§ª Executando suite completa de testes..."
npm run test:corpus

# Se passou, continuar
if [ $? -eq 0 ]; then
  echo ""
  echo "âœ… Todos os testes passaram! Push permitido."
  echo ""
else
  echo ""
  echo "âŒ Testes falharam! Push bloqueado."
  echo ""
  echo "ğŸ”§ Para corrigir:"
  echo "   1. Revise os erros acima"
  echo "   2. Execute: npm run test:corpus para ver detalhes"
  echo "   3. Corrija os problemas encontrados"
  echo "   4. Tente push novamente"
  echo ""
  echo "âš ï¸  Para bypass (emergÃªncia): git push --no-verify"
  echo ""
  exit 1
fi
